<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <link rel="shortcut icon" href="./img/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="https://use.typekit.net/kts8daj.css">
    <meta content="DeJokes" property="og:title" />
    <meta content="https://i.imgur.com/pUy2brX.png" property="og:image" />
    <meta content="#f8f9fa" data-react-helmet="true" name="theme-color" />
    
    <title> DeJokes </title>
</head>

<body>
    <header>
        <img class="main-logo" src="./img/logo.png">
        <img src="./img/dejokes.PNG">
        <a href="https://twitter.com/stjpg_" target="_blank"><img src="./img/twitter.png"></a>
    </header>
    <main>
        <section class="dejokes">
            <div class="joke">
                <text id="joke"> Press the button... </text>
                <text class="invisible" id="answer"> ..for a joke</text>
            </div>
            <div class="next">
                <button onclick="newjoke()">Gimme a joke!</button>
            </div>
        </section>

    </main>

    <footer>
        Not affiliated with <a href="https://twitter.com/degodsnft" target="_blank"><u>DeGods</u></a>.
    </footer>
</body>

</html>
<script src='https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js'></script>

<script>

    const joke = document.getElementById("joke");
    const answer = document.getElementById("answer");

    function newjoke() {
        const xhttp = new XMLHttpRequest();
        xhttp.onload = function (data) {
            var collect = JSON.parse(this.responseText);
            if (collect["setup"].length < 100) {
                joke.innerHTML = collect["setup"];
                answer.classList.remove('visible');
                answer.classList.add('invisible');
                answer.innerHTML = collect["delivery"];
                frame();
            }
        }
        xhttp.open("GET", "https://v2.jokeapi.dev/joke/Any?blacklistFlags=religious,political,racist,sexist,explicit&type=twopart", true);
        xhttp.send();
    }

    function show() {
        answer.classList.remove('invisible');
        answer.classList.add('visible');
    }

    var colors = ["#ff0080", "#7928ca"];

    function frame() {
        confetti({
            particleCount: 2,
            angle: 60,
            spread: 55,
            origin: { x: 0 },
            colors: colors,
        });
        confetti({
            particleCount: 2,
            angle: 120,
            spread: 55,
            origin: { x: 1 },
            colors: colors,
        });
    }


    answer.addEventListener("click", show);
</script>